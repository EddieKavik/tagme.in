.body {
 font-family: 'Noto Serif', 'Liberation Serif',
  serif;
 height: 100dvh;
 left: 0;
 overflow-x: hidden;
 overflow-y: auto;
 position: absolute;
 top: 0;
 width: 100%;
}

.toolbar,
footer,
.article-tools .score,
.message-footer,
a.channel {
 font-family: 'Avenir Next', sans-serif;
}

a {
 cursor: pointer;
 text-decoration-line: underline;
 text-decoration-style: dotted;
 text-underline-offset: 3px;
 word-wrap: break-word;
}

button,
input,
select,
textarea {
 border: none;
 color: inherit;
 font-family: inherit;
 font-size: inherit;
}

body,
html {
 margin: 0;
 padding: 0;
}

body {
 border-right: 1px solid transparent;
}

.app-header {
 display: flex;
 flex-direction: column;
 height: 94px;
 left: 0;
 overflow: visible;
 position: sticky;
 right: 0;
 top: 0;
 z-index: 1;
}

.realm {
 border-right: 1px solid #585858;
 cursor: pointer;
 filter: grayscale(1);
 padding: 10px 10px 0;
 user-select: none;
 white-space: pre;
}

.realm:hover {
 filter: grayscale(0.15);
}

.realm.active {
 background-color: #383828;
 box-shadow: inset 0 5px 0 #80808080;
}

.realm .invert-icon.hut {
 margin-right: 5px;
}

.app-accounts {
 background-color: #202020;
 border-bottom: 1px solid #585858;
 display: flex;
 flex-direction: row;
 height: 65px;
 box-shadow: inset 0 -13px 0px #585858;
 overflow-x: scroll;
 overflow-y: hidden;
}

.toolbar {
 display: flex;
 flex-direction: row;
 height: 50px;
}

.toolbar button {
 box-sizing: border-box;
 font-size: 24px;
 line-height: 10px;
 min-width: 50px;
 padding: 0 5px;
 text-align: center;
}

.toolbar button[title='Go to now'] {
 font-size: 16px;
 padding-top: 1px;
 font-weight: bold;
}

.toolbar button[title='Go back 1 hour'],
.toolbar button[title='Go forward 1 hour'] {
 padding-bottom: 8px;
 font-size: 26px;
}

.toolbar button:last-child {
 border-right: none;
}

.toolbar input {
 font-size: 24px;
}

.toolbar select {
 font-size: 14px;
 text-align: center;
}

.toolbar input,
.toolbar select {
 box-sizing: border-box;
 flex-grow: 1;
 flex-shrink: 1;
 padding: 0 15px 1px;
 width: 50px;
}

.toolbar input:last-child {
 border-right: none;
}

*:focus {
 outline: none;
}

.toolbar.time-toolbar {
 height: 25px;
 top: 50px;
}

.time-toolbar button,
.time-toolbar select {
 line-height: 5px;
}

.time-toolbar button {
 padding-bottom: 5px;
}

.toolbar.time-toolbar select {
 padding: 0;
}

.loader {
 left: 0;
 opacity: 0;
 position: absolute;
 right: 0;
 bottom: -8px;
 transition: opacity 0.5s ease;
 width: 100%;
}

main {
 box-sizing: border-box;
 line-height: 1.65;
 min-height: calc(100dvh - 79px - 78px);
}

main > p {
 margin: 0;
 padding: 15px;
}

footer {
 font-size: 12px;
 line-height: 1.65;
 opacity: 0.65;
 padding: 8px 15px;
 transition: opacity 0.5s ease;
}

footer:hover {
 opacity: 1;
}

footer h1 {
 font-size: 16px;
 margin: 0;
 padding: 7px 0;
}

footer > p {
 margin: 0;
 padding: 7px 0;
}

.h-stretch {
 display: inline-block;
 transform-origin: center;
 transform: scaleX(1.25) translateY(-1px);
}

.compose {
 position: relative;
}

.compose textarea {
 box-sizing: border-box;
 height: 78px;
 line-height: 1.65;
 min-height: 140px;
 padding: 11px 75px 11px 15px;
 resize: vertical;
 width: 100%;
}

.compose input[type='submit'] {
 border-radius: 7px;
 box-sizing: border-box;
 height: 24px;
 line-height: 22px;
 opacity: 0.5;
 position: absolute;
 right: 15px;
 text-align: center;
 top: 15px;
 transform-origin: top right;
 transform: scale(2);
 transition: 0.5s opacity ease;
 width: 24px;
}

.compose:hover input[type='submit'],
.compose textarea:focus + input[type='submit'] {
 opacity: 1;
}

article {
 box-sizing: border-box;
 min-height: 45px;
 padding: 3px 150px 3px 15px;
 position: relative;
 transition: opacity 1s ease;
 width: 100%;
}

article blockquote,
article p {
 margin: 8px 0;
}

article blockquote {
 background-color: #80808040;
 border-left: 5px solid #80808080;
 border-radius: 5px;
 padding: 5px 10px;
 white-space: pre-wrap;
}

.message-content > div:first-child {
 padding: 11px 15px;
}

.message-content > article > div:first-child {
 font-size: 18px;
}

.article-tools {
 display: flex;
 flex-direction: row;
 position: absolute;
 right: 15px;
 top: 11px;
 gap: 2px;
}

.article-tools .score,
.message-footer {
 font-size: 14px;
}

.article-tools .score {
 border-radius: 7px;
 box-sizing: border-box;
 height: 26px;
 line-height: 22px;
 min-width: 28px;
 padding: 2px 7px;
 text-align: center;
}

.article-tools > button.agree {
 border-radius: 7px;
 box-sizing: border-box;
 height: 26px;
 line-height: 22px;
 padding: 2px 6px 2px 7px;
}

.article-tools > button.disagree {
 border-radius: 7px;
 box-sizing: border-box;
 height: 26px;
 line-height: 22px;
 padding: 2px 7px;
}

article > div span {
 white-space: pre-wrap;
}

article > div > iframe,
article > div > .image-container {
 cursor: zoom-in;
 height: 50vh;
 min-height: 250px;
 margin-left: -15px;
 margin-top: 14px;
 width: 100vw;
}

article > div > .image-container.expanded {
 cursor: zoom-out;
 height: 100dvh;
 left: 0;
 right: 0;
 margin: 0 !important;
 overflow: hidden;
 padding: 0;
 position: fixed;
 top: 0;
 width: 100dvw;
 z-index: 10000;
}

article > div code {
 border-radius: 4px;
 font-family: 'Noto Sans Mono', monospace;
 font-size: 15px;
 padding: 2px 4px;
 position: relative;
}

a.channel {
 color: inherit;
 display: inline-block;
 text-decoration: none;
 margin: 0 7px 15px;
 padding: 2px 9px;
 position: relative;
 border-radius: 7px;
 white-space: pre;
}

a.channel > span {
 display: inline-block;
 border-radius: 5px;
 padding: 0 3px 1px;
 font-size: 11px;
 position: absolute;
 top: -7px;
 right: -6px;
 opacity: 0.8;
 font-weight: bold;
}

.channel-list {
 padding: 0 7px 7px 7px;
}

button[title='Toggle full screen'] {
 padding: 0 2px 4px 5px;
}

.image-container img {
 height: 100%;
 width: 100%;
 object-fit: contain;
 overflow: hidden;
}

.image-container.image-screenshot img {
 object-fit: cover;
 object-position: 50% 0;
}

.image-container.expanded.image-screenshot img {
 object-fit: contain;
}

article.highlight::after {
 animation: fadeOut 5s ease-out forwards;
 bottom: 0;
 content: '';
 left: 0;
 opacity: 1;
 pointer-events: none;
 position: absolute;
 right: 0;
 top: 0;
}

@keyframes fadeOut {
 0% {
  opacity: 1;
 }
 100% {
  opacity: 0.2;
 }
}

a {
 color: #a0e0f8;
 text-decoration-color: #a0e0f8;
}

button,
input,
select,
textarea {
 background-color: #282828;
}

button:active {
 background-color: #484848;
}

.toolbar:first-of-type {
 border-top: 1px solid #585858;
}

.toolbar {
 background-color: #282828;
 border-bottom: 1px solid #585858;
}

.toolbar button {
 border-right: 1px solid #585858;
}

.toolbar input,
.toolbar select {
 border-right: 1px solid #585858;
}

*::selection {
 background-color: #fff;
 color: #000;
}

*:focus {
 box-shadow: inset 0 0 0 2px #989898;
}

.time-toolbar button,
.time-toolbar select {
 background-color: #383428;
 color: #989058;
}

footer {
 background: linear-gradient(
  to bottom,
  #484848,
  #000
 );
 border-top: 1px solid #585858;
}

.compose textarea {
 background-color: #003800;
 border-bottom: 1px solid #585858;
}

.compose input[type='submit'] {
 background-color: #005800;
}

.compose input[type='submit']:hover {
 background-color: #009800;
}

article {
 background-color: #282828;
 border-bottom: 1px solid #585858;
}

.article-tools > .score {
 background-color: #585838;
}

.article-tools > button.agree,
.article-tools > button.disagree {
 background-color: #585858;
}

.article-tools > button.agree.agreed {
 background-color: #009800;
}

.article-tools > button.disagree.disagreed {
 background-color: #980000;
}

article > div > .image-container.expanded {
 background-color: #000;
}

article > div code {
 background-color: #000;
}

a.channel {
 box-shadow: inset 2px 2px 4px #ffffff40,
  inset -2px -2px 4px #00000040;
 background-color: #585858;
}

a.channel:hover {
 background-color: #787878;
}

a.channel > span {
 background-color: #383828;
}

article.highlight::after {
 background-color: #ccaa0060;
 border: 1px solid #ca0;
 box-shadow: inset 0 0 10px #ca0;
}

body.light-mode {
 color: #282828;
 background-color: #f8f8f8;
}

body.light-mode a {
 color: #3e7386;
 text-decoration-color: #3e7386;
}

body.light-mode button,
body.light-mode input,
body.light-mode select,
body.light-mode textarea {
 background-color: #efefef;
}

body.light-mode .app-accounts {
 background-color: #f8f8f8;
 border-bottom: 1px solid #c8c8c8;
 box-shadow: inset 0 -13px 0px #c8c8c8;
}

body.light-mode .realm {
 border-right: 1px solid #c8c8c8;
}

body.light-mode .realm.active {
 background-color: #e9e9f1;
}

body.light-mode button:active {
 background-color: #484848;
}

body.light-mode .toolbar:first-of-type {
 border-top: 1px solid #c8c8c8;
}

body.light-mode .toolbar {
 background-color: #282828;
 border-bottom: 1px solid #c8c8c8;
}

body.light-mode .toolbar button {
 border-right: 1px solid #c8c8c8;
}

body.light-mode .toolbar input,
body.light-mode .toolbar select {
 border-right: 1px solid #c8c8c8;
}

body.light-mode *::selection {
 background-color: #000;
 color: #fff;
}

body.light-mode *:focus {
 box-shadow: inset 0 0 0 2px #282828;
}

body.light-mode .time-toolbar button,
body.light-mode .time-toolbar select {
 background-color: #cfcbac;
 color: #69624f;
}

body.light-mode footer {
 background: linear-gradient(
  to bottom,
  #c8c8c8,
  #efefef
 );
 border-top: 1px solid #c8c8c8;
}

body.light-mode .compose textarea {
 background-color: #d3e9f1;
 border-bottom: 1px solid #c8c8c8;
}

body.light-mode .compose input[type='submit'] {
 background-color: #4e954e;
}

body.light-mode
 .compose
 input[type='submit']:hover {
 background-color: #41cd41;
}

body.light-mode article {
 background-color: #efefef;
 border-bottom: 1px solid #c8c8c8;
}

body.light-mode .article-tools > .score {
 background-color: #e0e0b3;
}

body.light-mode .article-tools > button.agree,
body.light-mode
 .article-tools
 > button.disagree {
 background-color: #c8c8c8;
}

body.light-mode
 .article-tools
 > button.agree.agreed {
 background-color: #00ef00;
}
body.light-mode
 .article-tools
 > button.disagree.disagreed {
 background-color: #ea0000;
}

body.light-mode
 article
 > div
 > .image-container.expanded {
 background-color: #000;
}

body.light-mode article > div code {
 background-color: #c8c8c8;
}

body.light-mode a.channel {
 box-shadow: inset 2px 2px 4px #ffffff40,
  inset -2px -2px 4px #00000040;
 background-color: #c8c8c8;
 color: inherit;
}

body.light-mode a.channel:hover {
 background-color: #787878;
}

body.light-mode a.channel > span {
 background-color: #efefef;
}

body.light-mode article.highlight::after {
 background-color: #ccaa0060;
 border: 1px solid #ca0;
 box-shadow: inset 0 0 10px #ca0;
}

.message-footer {
 min-height: 23px;
 opacity: 0.65;
 transition: opacity 0.5s ease;
 margin-bottom: 8px;
}

.image-container {
 margin-bottom: 9px;
}

.message-footer a {
 color: inherit;
 text-decoration-color: inherit;
}

.message-footer a:hover {
 color: #a0e0f8;
 text-decoration-color: #a0e0f8;
}

body.light-mode .message-footer a:hover {
 color: #003800;
 text-decoration-color: #003800;
}

article:hover .message-footer {
 opacity: 1;
}

body.on-message .display-on-channel,
body.on-channel .display-on-message {
 display: none;
}

.invert-icon {
 filter: invert(1) brightness(0.85);
}

body.light-mode .invert-icon {
 filter: brightness(2);
}

.invert-icon.hut {
 position: relative;
 top: -2px;
}

.invert-icon.hut {
 filter: brightness(0.95);
}

body.light-mode .invert-icon.hut {
 filter: brightness(1.25) contrast(0.5);
}

.close {
 margin-left: 10px;
 opacity: 0.5;
}

.close:hover {
 margin-left: 10px;
 opacity: 1;
}

.channel-history-shade {
 background-color: #80808080;
 bottom: 0;
 left: 0;
 overflow: hidden;
 position: fixed;
 right: 0;
 top: 42px;
 z-index: 2;
}

.channel-history {
 background-color: #000;
 max-height: calc(100dvh - 62px);
 box-shadow: 0 0 10px #00000080;
 left: 50px;
 overflow-x: hidden;
 overflow-y: scroll;
 padding: 4px 0;
 position: fixed;
 right: 50px;
 top: 42px;
 z-index: 3;
}

body.light-mode .channel-history {
 background-color: #fff;
}

.channel-history a {
 color: #fff;
 display: block;
 font-family: sans-serif;
 font-size: 20px;
 padding: 4px 15px;
 position: relative;
 text-decoration: none;
 white-space: pre-wrap;
}

.channel-history a:hover {
 background-color: #fff;
 color: #000;
}

body.light-mode .channel-history a {
 color: #000;
}

body.light-mode .channel-history a:hover {
 background-color: #000;
 color: #fff;
}

.channel-history a span.remove {
 filter: grayscale(1);
 position: absolute;
 right: 15px;
 top: 4px;
}

.channel-history a.small {
 font-size: 16px;
}

body.light-mode .channel-history a span.score {
 background-color: #efefef;
}

.channel-history a span.score {
 background-color: #383828;
 border-radius: 5px;
 color: inherit;
 display: inline-block;
 font-size: 11px;
 font-weight: bold;
 opacity: 0.8;
 padding: 0 3px 1px;
 position: absolute;
 right: 15px;
 top: 7px;
}

.channel-history a:hover span.score {
 background-color: #c8c8c8;
}

body.light-mode
 .channel-history
 a:hover
 span.score {
 background-color: #585858;
}

article > div code.formula {
 background-color: #583800;
}

body.light-mode article > div code.formula {
 background-color: #c8b880;
}

.formula-error {
 box-shadow: inset 0 0 2px red;
}

.formula-pending:after {
 content: '';
 position: absolute;
 top: 0;
 left: 0;
 width: 100%;
 height: 100%;
 background: linear-gradient(
  -90deg,
  #eecda3,
  #ef629f,
  #ebc7e6,
  #ee9ca7,
  #efcdb3,
  #e5b8f4,
  #cef9c2,
  #efcef5
 );
 background-size: 200%;
 filter: blur(10px);
 animation: glow 5s linear infinite;
}

@keyframes glow {
 0% {
  background-position: 0 0;
 }
 50% {
  background-position: 400% 0;
 }
 50.001% {
  background-position: -400% 0;
 }
 100% {
  background-position: 0 0;
 }
}
